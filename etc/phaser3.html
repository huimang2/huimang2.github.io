<!DOCTYPE html>
<html>
<head>

    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- dynamically fixing the title for tag/author pages -->



    <title>게임 프레임워크 : Phaser3</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/screen.edited.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/syntax.css" />

    <!-- 웹 폰트 설정 -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/nanumgothic.css">

    <!-- custom.css -->
    <link rel="stylesheet" type="text/css" href="/assets/css/custom.css" />
    

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- syntax.css -->
    <link rel="stylesheet" href="/assets/css/syntax.css">
    
    <!-- highlight.js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>

    <!--[if IE]>
        <style>
            p, ol, ul{
                width: 100%;
            }
            blockquote{
                width: 100%;
            }
        </style>
    <![endif]-->
    
    <!-- This tag outputs SEO meta+structured data and other important settings -->
    <meta name="description" content="프로그래밍 노트" />
    <link rel="shortcut icon" href="https://huimang2.github.io/assets/images/favicon.jpg" type="image/png" />
    <link rel="canonical" href="https://huimang2.github.io/etc/phaser3" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="Rubisco's Programming Note" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="게임 프레임워크 : Phaser3" />
    <meta property="og:description" content="Phaser3이란? RPG 만들기(일명 알만툴) 이라고 아시나요? 게임 만들기에 관심이 있었다면 한번쯤 알만툴이나 스타크래프트 유즈맵 편집기를 통해 게임을 제작해 본 적이 있을 것입니다. Phaser 또한 이러한 툴과 비슷한 자바스크립트 기반 게임 프레임워크 입니다. 자바스크립트를 기반으로 하기때문에 웹브라우저 환경에서 게임실행이 가능하도록 합니다. 기본적으로 씬(Scene)과 게임 오브젝트(Game Object)로 구성되며, 물리엔진을 포함하고 있어서 손쉽게" />
    <meta property="og:url" content="https://huimang2.github.io/etc/phaser3" />
    <meta property="og:image" content="https://huimang2.github.io/assets/images/phaser3/phaser3-cover.png" />
    <meta property="article:publisher" content="https://www.facebook.com/" />
    <meta property="article:author" content="https://www.facebook.com/" />
    <meta property="article:published_time" content="2022-07-29T23:00:00+09:00" />
    <meta property="article:modified_time" content="2022-07-29T23:00:00+09:00" />
    <meta property="article:tag" content="Typescript" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="게임 프레임워크 : Phaser3" />
    <meta name="twitter:description" content="Phaser3이란? RPG 만들기(일명 알만툴) 이라고 아시나요? 게임 만들기에 관심이 있었다면 한번쯤 알만툴이나 스타크래프트 유즈맵 편집기를 통해 게임을 제작해 본 적이 있을 것입니다. Phaser 또한 이러한 툴과 비슷한 자바스크립트 기반 게임 프레임워크 입니다. 자바스크립트를 기반으로 하기때문에 웹브라우저 환경에서 게임실행이 가능하도록 합니다. 기본적으로 씬(Scene)과 게임 오브젝트(Game Object)로 구성되며, 물리엔진을 포함하고 있어서 손쉽게" />
    <meta name="twitter:url" content="https://huimang2.github.io/" />
    <meta name="twitter:image" content="https://huimang2.github.io/assets/images/phaser3/phaser3-cover.png" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Rubisco's Programming Note" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Typescript" />
    <meta name="twitter:site" content="@" />
    <meta name="twitter:creator" content="@" />
    <meta property="og:image:width" content="1400" />
    <meta property="og:image:height" content="933" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "Rubisco's Programming Note",
        "logo": "https://huimang2.github.io/"
    },
    "url": "https://huimang2.github.io/etc/phaser3",
    "image": {
        "@type": "ImageObject",
        "url": "https://huimang2.github.io/assets/images/phaser3/phaser3-cover.png",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://huimang2.github.io/etc/phaser3"
    },
    "description": "Phaser3이란? RPG 만들기(일명 알만툴) 이라고 아시나요? 게임 만들기에 관심이 있었다면 한번쯤 알만툴이나 스타크래프트 유즈맵 편집기를 통해 게임을 제작해 본 적이 있을 것입니다. Phaser 또한 이러한 툴과 비슷한 자바스크립트 기반 게임 프레임워크 입니다. 자바스크립트를 기반으로 하기때문에 웹브라우저 환경에서 게임실행이 가능하도록 합니다. 기본적으로 씬(Scene)과 게임 오브젝트(Game Object)로 구성되며, 물리엔진을 포함하고 있어서 손쉽게"
}
    </script>

    <!-- <script type="text/javascript" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/javascript">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="게임 프레임워크 : Phaser3" href="/feed.xml" />


    <!-- MathJax -->
    

</head>
<body class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
        
            
                <a class="site-nav-logo" href="https://huimang2.github.io/">Rubisco's Programming Note</a>
            
        
        
            <ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="/">Home</a></li>
    <li class="nav-java" role="menuitem"><a href="/tag/java/">JAVA</a></li>
    <li class="nav-typescript" role="menuitem"><a href="/tag/typescript/">Typescript</a></li>
    <li class="nav-python" role="menuitem"><a href="/tag/python/">Python</a></li>
    <li class="nav-python" role="menuitem"><a href="/tag/algorithm/">Algorithm</a></li>
    <li class="nav-python" role="menuitem"><a href="/archive.html">All Posts</a></li>
    <li class="nav-python" role="menuitem"><a href="/author_archive.html">Tag별 Posts</a></li>
</ul>

        
    </div>
    <div class="site-nav-right">
        <div class="social-links">
            
            
        </div>
        
            <a class="subscribe-button" href="#subscribe">Search</a>
        
    </div>
</nav>

    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full  tag-typescript tag-phaser3 post ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="29 July 2022">29 July 2022</time>
                    
                        <span class="date-divider">/</span>
                        
                            
                                
                                <a href='/tag/typescript/'>#타입스크립트</a>,&nbsp;
                                
                            
                        
                            
                                
                                <a href='/tag/phaser3/'>#PHASER3</a>
                                
                            
                        
                    
                </section>
                <h1 class="post-full-title">게임 프레임워크 : Phaser3</h1>
            </header>

            <!-- 
            <figure class="post-full-image" style="background-image: url(/assets/images/phaser3/phaser3-cover.png)">
            </figure>
             -->

            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <div id="toc">
                        <ul><li><a href="#phaser3이란"><span>Phaser3이란?</span></a></li><li><a href="#프로젝트-설정"><span>프로젝트 설정</span></a></li><li><a href="#게임-생성"><span>게임 생성</span></a></li><li><a href="#씬scene-생성"><span>씬(Scene) 생성</span></a></li><li><a href="#물리객체-생성"><span>물리객체 생성</span></a></li><li><a href="#캐릭터-생성"><span>캐릭터 생성</span></a></li><li><a href="#캐릭터-이동"><span>캐릭터 이동</span></a></li><li><a href="#별-모으기"><span>별 모으기</span></a></li><li><a href="#점수-설정"><span>점수 설정</span></a></li><li><a href="#장애물-설정"><span>장애물 설정</span></a></li></ul>

                    </div>
                    <h1 id="phaser3이란">Phaser3이란?</h1>

<p>RPG 만들기(일명 알만툴) 이라고 아시나요? 게임 만들기에 관심이 있었다면 한번쯤 알만툴이나 스타크래프트 유즈맵 편집기를 통해 게임을 제작해 본 적이 있을 것입니다. Phaser 또한 이러한 툴과 비슷한 자바스크립트 기반 게임 프레임워크 입니다. 자바스크립트를 기반으로 하기때문에 웹브라우저 환경에서 게임실행이 가능하도록 합니다.</p>

<p>기본적으로 <code class="language-plaintext highlighter-rouge">씬(Scene)</code>과 <code class="language-plaintext highlighter-rouge">게임 오브젝트(Game Object)</code>로 구성되며, 물리엔진을 포함하고 있어서 손쉽게 게임을 제작할 수 있습니다.</p>

<p>공식문서의 튜토리얼을 통해 간단한 게임을 제작해보도록 하겠습니다.</p>

<blockquote>
  <p>완성 프로젝트 : <a href="/file/phaser3_example.zip" target="_blank">phaser3_example.zip</a></p>
</blockquote>

<h1 id="프로젝트-설정">프로젝트 설정</h1>

<p>우분투 20.04 LTS 환경을 기준으로 프로젝트를 생성해보겠습니다. 웹브라우저 환경에서 실행되므로 웹서버를 필요로 합니다. 간단하게 nodejs를 통해 웹서버를 만들도록 합시다.</p>

<div data-lang="BASH" class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">mkdir </span>phaser3 <span class="o">&amp;&amp;</span> <span class="nb">cd </span>phaser3 <span class="o">&amp;&amp;</span> <span class="nb">mkdir </span>public <span class="o">&amp;&amp;</span>  npm i http-server
</code></pre></div></div>

<p>웹서버를 실행하면 public 폴더가 루트폴더로 설정됩니다.</p>

<div data-lang="BASH" class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npx http-server
</code></pre></div></div>

<p>타입스크립트를 통해 프로젝트를 만들도록 하겠습니다. 새로운 터미널을 열고 npm을 통해 typescript와 phaser를 설치합니다.</p>

<div data-lang="BASH" class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm i typescript phaser
</code></pre></div></div>

<p>타입스크립트 설정파일(tsconfig.json)을 생성하고 다음과 같이 작성해줍니다.</p>

<div data-lang="BASH" class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npx tsc <span class="nt">--init</span> <span class="o">&amp;&amp;</span> nano tsconfig.json 
</code></pre></div></div>

<h6 id="tsconfigjson">tsconfig.json</h6>
<div data-lang="JSON" class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"compilerOptions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ES2015"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"module"</span><span class="p">:</span><span class="w"> </span><span class="s2">"commonJS"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"allowJs"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"checkJs"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"jsx"</span><span class="p">:</span><span class="w"> </span><span class="s2">"preserve"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"outDir"</span><span class="p">:</span><span class="w"> </span><span class="s2">"./public/assets/js/"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"removeComments"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"strict"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"noImplicitAny"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"strictNullChecks"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"strictFunctionTypes"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"strictPropertyInitialization"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"noImplicitThis"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"alwaysStrict"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"noUnusedLocals"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"noUnusedParameters"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"noImplicitReturns"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"noFallthroughCasesInSwitch"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"esModuleInterop"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>모듈을 합치고 호환성을 위해 웹팩을 사용하도록 하겠습니다.</p>

<div data-lang="BASH" class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm i webpack webpack-cli ts-loader
</code></pre></div></div>

<p>웹팩 설정파일을 작성합니다.</p>

<div data-lang="BASH" class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">touch </span>webpack.config.js <span class="o">&amp;&amp;</span> nano webpack.config.js
</code></pre></div></div>

<h6 id="webpackconfigjs">webpack.config.js</h6>
<div data-lang="TYPESCRIPT" class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">entry</span><span class="p">:</span> <span class="dl">"</span><span class="s2">./src/main.ts</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">mode</span><span class="p">:</span> <span class="dl">"</span><span class="s2">none</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">module</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">rules</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="na">test</span><span class="p">:</span> <span class="sr">/</span><span class="se">\.</span><span class="sr">tsx</span><span class="se">?</span><span class="sr">$/</span><span class="p">,</span>
        <span class="na">use</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ts-loader</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">exclude</span><span class="p">:</span> <span class="sr">/node_modules/</span><span class="p">,</span>
      <span class="p">},</span>
    <span class="p">],</span>
  <span class="p">},</span>
  <span class="na">resolve</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">extensions</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">.tsx</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">.ts</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">.js</span><span class="dl">"</span><span class="p">],</span>
  <span class="p">},</span>
  <span class="na">output</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">filename</span><span class="p">:</span> <span class="dl">"</span><span class="s2">main.js</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">path</span><span class="p">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="dl">"</span><span class="s2">public/assets/js</span><span class="dl">"</span><span class="p">),</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div></div>

<p>웹팩을 <code class="language-plaintext highlighter-rouge">watch mode</code>로 실행하면 코드가 수정될 때마다 자동으로 컴파일 됩니다.</p>

<div data-lang="BASH" class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npx webpack <span class="nt">-w</span>
</code></pre></div></div>

<h1 id="게임-생성">게임 생성</h1>

<p>우선 메인 문서를 생성합시다. http-server는 <code class="language-plaintext highlighter-rouge">index.html</code>를 메인 문서로 인식합니다.</p>

<div data-lang="BASH" class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">touch </span>public/index.html
</code></pre></div></div>

<p>다음과 같이 컴파일된 자바스크립트 파일을 추가해주세요.</p>

<h6 id="indexhtml">index.html</h6>
<div data-lang="HTML" class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"X-UA-Compatible"</span> <span class="na">content=</span><span class="s">"IE=edge"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Document<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"/assets/js/main.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<p>게임 인스턴스는 <code class="language-plaintext highlighter-rouge">new Phaser.Game()</code>을 호출하여 생성할 수 있습니다. 타입스크립트 파일을 작성하겠습니다.</p>

<div data-lang="BASH" class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">touch</span> /src/main.ts <span class="o">&amp;&amp;</span> nano /src/main.ts
</code></pre></div></div>

<h6 id="maints">main.ts</h6>
<div data-lang="TYPESCRIPT" class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">Phaser</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">phaser</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">config</span><span class="p">:</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Types</span><span class="p">.</span><span class="nx">Core</span><span class="p">.</span><span class="nx">GameConfig</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">type</span><span class="p">:</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">AUTO</span><span class="p">,</span>
    <span class="na">width</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span>
    <span class="na">height</span><span class="p">:</span> <span class="mi">600</span><span class="p">,</span>
    <span class="na">backgroundColor</span><span class="p">:</span> <span class="mh">0xfff</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">new</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Game</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">Game</code> 인스턴스는 매개변수로 <code class="language-plaintext highlighter-rouge">GameConfig</code> 객체를 받습니다. GameConfig 객체는 게임에 필요한 여러 설정값을 프로퍼티로 가지고 있습니다.</p>

<p><code class="language-plaintext highlighter-rouge">type</code> 프로퍼티는 그래픽의 렌더링 방식을 설정합니다. 캔버스를 사용하는 <code class="language-plaintext highlighter-rouge">Phaser.CANVAS</code>, WebGL을 사용하는 <code class="language-plaintext highlighter-rouge">Phaser.WEBGL</code>, 자동설정인 <code class="language-plaintext highlighter-rouge">Phaser.AUTO</code> 중 하나를 입력합니다.</p>

<p><code class="language-plaintext highlighter-rouge">width</code>와 <code class="language-plaintext highlighter-rouge">height</code> 프로퍼티는 화면 크기를 설정합니다. number 타입이며, 픽셀 단위로 입력합니다.</p>

<p><code class="language-plaintext highlighter-rouge">backgroundColor</code>는 화면의 색상을 설정합니다. number 타입의 hex 색상코드 또는 string 타입의 rgb 색상코드를 입력합니다.</p>

<p>다양한 프로퍼티를 알고 싶다면 <a href="https://photonstorm.github.io/phaser3-docs/Phaser.Types.Core.html#.GameConfig" target="_blank">공식문서</a>를 참고하세요.</p>

<h1 id="씬scene-생성">씬(Scene) 생성</h1>

<p>게임 객체의 동적인 작용을 위해서는 씬 객체를 생성해야 합니다. 씬 객체의 라이프 사이클은 다음과 같습니다.</p>

<h6 id="mainscenets">mainScene.ts</h6>
<div data-lang="TYPESCRIPT" class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">MainScene</span> <span class="kd">extends</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Scene</span> <span class="p">{</span>

    <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">({</span> <span class="na">key</span><span class="p">:</span> <span class="dl">'</span><span class="s1">main</span><span class="dl">'</span><span class="p">,</span> <span class="na">active</span><span class="p">:</span> <span class="kc">true</span> <span class="p">})</span>
    <span class="p">}</span>

    <span class="nx">preload</span><span class="p">():</span> <span class="k">void</span> <span class="p">{}</span>

    <span class="nx">create</span><span class="p">():</span> <span class="k">void</span> <span class="p">{}</span>

    <span class="nx">update</span><span class="p">(</span><span class="nx">time</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">delta</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="k">void</span> <span class="p">{}</span>

    <span class="nx">destroy</span><span class="p">():</span> <span class="k">void</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Scene 클래스를 상속받아 각각 오버라이드 하면 됩니다.</p>

<p><code class="language-plaintext highlighter-rouge">preload()</code> 메소드는 게임에 필요한 이미지나 오디오 파일 등의 리소스를 로드할 때 사용합니다. 게임에 필요한 리소스를 <code class="language-plaintext highlighter-rouge">Asset</code> 이라고 합니다. asset을 로드할 때 Scene 객체의 <code class="language-plaintext highlighter-rouge">load</code> 프로퍼티를 사용합니다. 일단 asset이 로드되면 <code class="language-plaintext highlighter-rouge">Loader</code> 객체는 키값을 통해 asset에 접근할 수 있도록 해줍니다.</p>

<p>첨부파일의 이미지를 로드하기위해 다음 코드를 작성하세요.</p>

<div data-lang="TYPESCRIPT" class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">preload</span><span class="p">():</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">load</span><span class="p">.</span><span class="nx">image</span><span class="p">(</span><span class="dl">'</span><span class="s1">sky</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">assets/image/sky.png</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">load</span><span class="p">.</span><span class="nx">image</span><span class="p">(</span><span class="dl">'</span><span class="s1">ground</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">assets/image/platform.png</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">load</span><span class="p">.</span><span class="nx">image</span><span class="p">(</span><span class="dl">'</span><span class="s1">star</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">assets/image/star.png</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">load</span><span class="p">.</span><span class="nx">image</span><span class="p">(</span><span class="dl">'</span><span class="s1">bomb</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">assets/image/bomb.png</span><span class="dl">'</span><span class="p">);</span>     
    <span class="k">this</span><span class="p">.</span><span class="nx">load</span><span class="p">.</span><span class="nx">spritesheet</span><span class="p">(</span><span class="dl">'</span><span class="s1">dude</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">assets/image/dude.png</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">frameWidth</span><span class="p">:</span> <span class="mi">32</span><span class="p">,</span> <span class="na">frameHeight</span><span class="p">:</span> <span class="mi">48</span> <span class="p">});</span>
<span class="p">}</span>
</code></pre></div></div>

<p>하나의 이미지를 로드하려면 <code class="language-plaintext highlighter-rouge">Sene.load.image</code> 메소드를 호출합니다. 첫번째 파라미터로 키값을, 두번째 파라미터로 asset 경로를 입력합니다.</p>

<p>spriteSheet의 경우 <code class="language-plaintext highlighter-rouge">Sene.load.spritesheet</code> 메소드를 호출하여 불러올 수 있습니다. 역시 첫번째 파라미터로 키값을, 두번째 파라미터로 asset 경로를 받으며, 3번째 파라미터로 sprite 설정 객체를 받습니다. 하나의 프레임에 대한 넓이와 높이를 설정해줍니다.</p>

<p>로드한 asset은 <code class="language-plaintext highlighter-rouge">create()</code> 메소드에 Scene 객체의 add 프로퍼티를 통해 Scene에 추가할 수 있습니다.</p>

<div data-lang="TYPESCRIPT" class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">create</span><span class="p">():</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">image</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="dl">'</span><span class="s1">sky</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">image</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="dl">'</span><span class="s1">star</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>첫번째 파라미터는 x축 좌표, 두번째 파라미터는 y축 좌표, 세번째 파라미터는 asset의 키값에 해당합니다.</p>

<p>씬 코드를 작성했다면 게임 설정 객체의 scene 프로퍼티에 배열로 넣어주면 됩니다. 다음과 같이 작성하고 컴파일 후 <code class="language-plaintext highlighter-rouge">localhost:8080</code> 으로 들어가봅시다.</p>

<h6 id="maints-1">main.ts</h6>
<div data-lang="TYPESCRIPT" class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">Phaser</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">phaser</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MainScene</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./mainScene</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">config</span><span class="p">:</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Types</span><span class="p">.</span><span class="nx">Core</span><span class="p">.</span><span class="nx">GameConfig</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">type</span><span class="p">:</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">AUTO</span><span class="p">,</span>
    <span class="na">width</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span>
    <span class="na">height</span><span class="p">:</span> <span class="mi">600</span><span class="p">,</span>
    <span class="na">backgroundColor</span><span class="p">:</span> <span class="mh">0xfff</span><span class="p">,</span>
    <span class="na">scene</span><span class="p">:</span> <span class="p">[</span><span class="nx">MainScene</span><span class="p">]</span>
<span class="p">};</span>

<span class="k">new</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Game</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>
</code></pre></div></div>

<h6 id="mainscenets-1">mainScene.ts</h6>
<div data-lang="TYPESCRIPT" class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">class</span> <span class="nx">MainScene</span> <span class="kd">extends</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Scene</span> <span class="p">{</span>

    <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">({</span> <span class="na">key</span><span class="p">:</span> <span class="dl">'</span><span class="s1">main</span><span class="dl">'</span><span class="p">,</span> <span class="na">active</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
    <span class="p">}</span>

    <span class="nx">preload</span><span class="p">():</span> <span class="k">void</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">load</span><span class="p">.</span><span class="nx">image</span><span class="p">(</span><span class="dl">'</span><span class="s1">sky</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">assets/image/sky.png</span><span class="dl">'</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">load</span><span class="p">.</span><span class="nx">image</span><span class="p">(</span><span class="dl">'</span><span class="s1">ground</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">assets/image/platform.png</span><span class="dl">'</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">load</span><span class="p">.</span><span class="nx">image</span><span class="p">(</span><span class="dl">'</span><span class="s1">star</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">assets/image/star.png</span><span class="dl">'</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">load</span><span class="p">.</span><span class="nx">image</span><span class="p">(</span><span class="dl">'</span><span class="s1">bomb</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">assets/image/bomb.png</span><span class="dl">'</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">load</span><span class="p">.</span><span class="nx">spritesheet</span><span class="p">(</span><span class="dl">'</span><span class="s1">dude</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">assets/image/dude.png</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">frameWidth</span><span class="p">:</span> <span class="mi">32</span><span class="p">,</span> <span class="na">frameHeight</span><span class="p">:</span> <span class="mi">48</span> <span class="p">});</span>
    <span class="p">}</span>

    <span class="nx">create</span><span class="p">():</span> <span class="k">void</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">image</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="dl">'</span><span class="s1">sky</span><span class="dl">'</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">image</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="dl">'</span><span class="s1">star</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>다음과 같이 배경과 별 이미지가 출력된 것을 확인할 수 있습니다.</p>

<p><img src="/assets/images/phaser3/phaser3-img-01.png" alt="pahser-01" title="배경과 별의 Assset 객체" /></p>

<h1 id="물리객체-생성">물리객체 생성</h1>

<p>대부분의 게임들은 물리 효과가 적용되어 있습니다. 예를 들어 캐릭터가 점프를 하면 중력의 영향을 받아 낙하 하거나 충돌시 작용 반작용 효과를 받습니다. 이런 효과를 구현하려면 많은 노력이 필요하겠지만 Phaser는 2가지 물리엔진 <code class="language-plaintext highlighter-rouge">arcade</code>와 <code class="language-plaintext highlighter-rouge">matter</code>를 포함하고 있어 손쉽게 물리 효과를 부여할 수 있습니다.</p>

<p><code class="language-plaintext highlighter-rouge">arcade</code>는 Phaser 개발자가 만든 간단한 물리 엔진입니다. 간단히 사용하기에 편하지만 복잡한 게임을 만들기에는 조금 부족합니다.</p>

<p><code class="language-plaintext highlighter-rouge">matter</code>는 상용화 된 물리 엔진입니다. 앵그리버드 물리 엔진으로 유명한 Box2d에 이어 자바스크립트에서 사용되는 양대 산맥의 물리 엔진으로 알려져 있습니다.</p>

<p>Phaser 튜토리얼에 따라 arcade 엔진으로 물리 객체를 생성해보겠습니다. 우선 게임 설정 객체에 physics 프로퍼티를 설정해주세요.</p>

<div data-lang="TYPESCRIPT" class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">config</span><span class="p">:</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Types</span><span class="p">.</span><span class="nx">Core</span><span class="p">.</span><span class="nx">GameConfig</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">type</span><span class="p">:</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">AUTO</span><span class="p">,</span>
    <span class="na">width</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span>
    <span class="na">height</span><span class="p">:</span> <span class="mi">600</span><span class="p">,</span>
    <span class="na">backgroundColor</span><span class="p">:</span> <span class="mh">0xfff</span><span class="p">,</span>
    <span class="na">scene</span><span class="p">:</span> <span class="p">[</span><span class="nx">MainScene</span><span class="p">],</span>
    <span class="na">physics</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">default</span><span class="p">:</span> <span class="dl">'</span><span class="s1">arcade</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">arcade</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">gravity</span><span class="p">:</span> <span class="p">{</span> <span class="na">y</span><span class="p">:</span> <span class="mi">300</span> <span class="p">},</span>
            <span class="na">debug</span><span class="p">:</span> <span class="kc">false</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<p>씬 객체의 create 메소드에 다음과 같이 물리 객체를 생성하는 코드를 작성해 주세요.</p>

<div data-lang="TYPESCRIPT" class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">create</span><span class="p">():</span> <span class="k">void</span> <span class="p">{</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">image</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="dl">'</span><span class="s1">sky</span><span class="dl">'</span><span class="p">);</span>

    <span class="kd">const</span> <span class="nx">platforms</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">physics</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">staticGroup</span><span class="p">();</span>

    <span class="nx">platforms</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">568</span><span class="p">,</span> <span class="dl">'</span><span class="s1">ground</span><span class="dl">'</span><span class="p">).</span><span class="nx">setScale</span><span class="p">(</span><span class="mi">2</span><span class="p">).</span><span class="nx">refreshBody</span><span class="p">();</span>
    <span class="nx">platforms</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="mi">600</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="dl">'</span><span class="s1">ground</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">platforms</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="dl">'</span><span class="s1">ground</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">platforms</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="mi">750</span><span class="p">,</span> <span class="mi">220</span><span class="p">,</span> <span class="dl">'</span><span class="s1">ground</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>씬 객체에서 <code class="language-plaintext highlighter-rouge">physics</code> 프로퍼티는 <strong>arcade 물리 엔진</strong>을 의미합니다. 물리 객체에는 <code class="language-plaintext highlighter-rouge">dynamic</code> 객체와 <code class="language-plaintext highlighter-rouge">static</code> 객체가 있습니다. dynamic 객체는 중력이나 가속도의 영향을 받아 상호작용 할 수 있는 객체이고, static 객체는 벽과 같이 중력의 영향도 받지 않을 뿐더러 부딪쳐도 움직이지 않는 객체입니다.</p>

<p>위에 코드에서는 우선 지형을 static 객체로 만들어보았습니다. static 그룹 객체를 만들고 4개의 static 객체를 추가했습니다. create 메소드에서 첫번째 파라미터는 x축 좌표, 두번째 파라미터는 y축 좌표, 세번째 파라미터는 asset의 키값입니다.</p>

<p><img src="/assets/images/phaser3/phaser3-img-02.png" alt="pahser-02" title="static 객체" /></p>

<h1 id="캐릭터-생성">캐릭터 생성</h1>

<p>이제 지형 위를 움직일 캐릭터를 생성해 보겠습니다.</p>

<p>다음 코드를 create 메소드에 추가해주세요.</p>

<div data-lang="TYPESCRIPT" class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">player</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">physics</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">sprite</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">450</span><span class="p">,</span> <span class="dl">'</span><span class="s1">dude</span><span class="dl">'</span><span class="p">).</span><span class="nx">setName</span><span class="p">(</span><span class="dl">"</span><span class="s2">player</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">player</span><span class="p">.</span><span class="nx">setBounce</span><span class="p">(</span><span class="mf">0.2</span><span class="p">);</span>
<span class="nx">player</span><span class="p">.</span><span class="nx">setCollideWorldBounds</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

<span class="k">this</span><span class="p">.</span><span class="nx">anims</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
    <span class="na">key</span><span class="p">:</span> <span class="dl">'</span><span class="s1">left</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">frames</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">anims</span><span class="p">.</span><span class="nx">generateFrameNumbers</span><span class="p">(</span><span class="dl">'</span><span class="s1">dude</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">start</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">end</span><span class="p">:</span> <span class="mi">3</span> <span class="p">}),</span>
    <span class="na">frameRate</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="na">repeat</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span>
<span class="p">});</span>

<span class="k">this</span><span class="p">.</span><span class="nx">anims</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
    <span class="na">key</span><span class="p">:</span> <span class="dl">'</span><span class="s1">turn</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">frames</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="na">key</span><span class="p">:</span> <span class="dl">'</span><span class="s1">dude</span><span class="dl">'</span><span class="p">,</span> <span class="na">frame</span><span class="p">:</span> <span class="mi">4</span> <span class="p">}</span> <span class="p">],</span>
    <span class="na">frameRate</span><span class="p">:</span> <span class="mi">20</span>
<span class="p">});</span>

<span class="k">this</span><span class="p">.</span><span class="nx">anims</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
    <span class="na">key</span><span class="p">:</span> <span class="dl">'</span><span class="s1">right</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">frames</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">anims</span><span class="p">.</span><span class="nx">generateFrameNumbers</span><span class="p">(</span><span class="dl">'</span><span class="s1">dude</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">start</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="na">end</span><span class="p">:</span> <span class="mi">8</span> <span class="p">}),</span>
    <span class="na">frameRate</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="na">repeat</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span>
<span class="p">});</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">this.physics.add.sprite()</code> 메소드를 통해 캐릭터의 sprite를 추가했습니다. sprite는 2d 이미지 합성을 통해 애니메이션 효과를 내는 기술입니다. 움직임이 있는 이미지라고 보시면 됩니다.  <code class="language-plaintext highlighter-rouge">setName</code> 함수를 통해 나중에 호출할 수 있도록 이름을 설정합니다.</p>

<p><code class="language-plaintext highlighter-rouge">Physics Game Object Factory</code>에 의해 생성된 sprite는 기본적으로 dynamic 객체가 됩니다. 플레이어 객체에 <code class="language-plaintext highlighter-rouge">setBounce()</code>를 통해 바운스를 설정하면 충돌시 작용 반작용 효과를 나타낼 수 있습니다. 또한 <code class="language-plaintext highlighter-rouge">setCollideWorldBounds()</code>를 통해 WoldBounds를 true로 설정하면 화면 경계에서 충돌 효과가 나타납니다. <code class="language-plaintext highlighter-rouge">setGravityY()</code>를 통해서는 중력의 크기를 설정할 수 있습니다.</p>

<p>Scene 객체의 <code class="language-plaintext highlighter-rouge">anims.create()</code> 메소드를 통해서는 애니메이션 객체를 만들 수 있습니다. <code class="language-plaintext highlighter-rouge">key</code>는 애니메이션 객체의 키가 되고 <code class="language-plaintext highlighter-rouge">frames</code>는 프레임을, <code class="language-plaintext highlighter-rouge">frameRate</code>는 fps를 나타냅니다. <code class="language-plaintext highlighter-rouge">repeat</code>는 애니메이션의 반복수를 나타내는데 -1은 무한을 의미합니다.</p>

<p><img src="/assets/images/phaser3/phaser3-img-03.png" alt="pahser-03" title="캐릭터 생성" /></p>

<p>지형 객체는 static 객체이기 때문에 dinamic 객체인 캐릭터와 상호작용하기 위해서는 <code class="language-plaintext highlighter-rouge">collider</code> 객체로 충돌을 설정해야 합니다. 다음 코드를 씬 객체의 create 메소드에 추가해주세요.</p>

<div data-lang="TYPESCRIPT" class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">this</span><span class="p">.</span><span class="nx">physics</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">collider</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span> <span class="nx">platforms</span><span class="p">);</span>
</code></pre></div></div>

<p><img src="/assets/images/phaser3/phaser3-img-04.png" alt="pahser-04" title="collider 설정" /></p>

<h1 id="캐릭터-이동">캐릭터 이동</h1>

<p>이제 키보드를 통해 캐릭터를 이동할 수 있도록 해보겠습니다.</p>

<p>update 메소드에 다음 코드를 작성합니다. update 메소드는 씬 객체가 존재하는 동안 주기적으로 실행되는 메소드 입니다.</p>

<div data-lang="TYPESCRIPT" class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">update</span><span class="p">(</span><span class="nx">_time</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">_delta</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>

    <span class="kd">const</span> <span class="nx">cursors</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">keyboard</span><span class="p">.</span><span class="nx">createCursorKeys</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">player</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">getByName</span><span class="p">(</span><span class="dl">"</span><span class="s2">player</span><span class="dl">"</span><span class="p">)</span> <span class="k">as</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Types</span><span class="p">.</span><span class="nx">Physics</span><span class="p">.</span><span class="nx">Arcade</span><span class="p">.</span><span class="nx">SpriteWithDynamicBody</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">cursors</span><span class="p">.</span><span class="nx">left</span><span class="p">.</span><span class="nx">isDown</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">player</span><span class="p">.</span><span class="nx">setVelocityX</span><span class="p">(</span><span class="o">-</span><span class="mi">160</span><span class="p">);</span>

        <span class="nx">player</span><span class="p">.</span><span class="nx">anims</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="dl">'</span><span class="s1">left</span><span class="dl">'</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">cursors</span><span class="p">.</span><span class="nx">right</span><span class="p">.</span><span class="nx">isDown</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">player</span><span class="p">.</span><span class="nx">setVelocityX</span><span class="p">(</span><span class="mi">160</span><span class="p">);</span>

        <span class="nx">player</span><span class="p">.</span><span class="nx">anims</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="dl">'</span><span class="s1">right</span><span class="dl">'</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="nx">player</span><span class="p">.</span><span class="nx">setVelocityX</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

        <span class="nx">player</span><span class="p">.</span><span class="nx">anims</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="dl">'</span><span class="s1">turn</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">cursors</span><span class="p">.</span><span class="nx">up</span><span class="p">.</span><span class="nx">isDown</span> <span class="o">&amp;&amp;</span> <span class="nx">player</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">touching</span><span class="p">.</span><span class="nx">down</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">player</span><span class="p">.</span><span class="nx">setVelocityY</span><span class="p">(</span><span class="o">-</span><span class="mi">330</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>의미는 알기 쉬울 것입니다. 주기적으로 해당 키보드를 누르고 있는지 체크하여 속도를 설정하고 키에 해당하는 애니메이션을 실행합니다.</p>

<h1 id="별-모으기">별 모으기</h1>

<p>이제 별을 모으는 코드를 작성해보겠습니다. 우선 별을 static 객체로 생성합니다. 다음 코드를 create 메소드에 추가합니다.</p>

<div data-lang="TYPESCRIPT" class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">stars</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">physics</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">group</span><span class="p">({</span>
    <span class="na">key</span><span class="p">:</span> <span class="dl">'</span><span class="s1">star</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">repeat</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span>
    <span class="na">setXY</span><span class="p">:</span> <span class="p">{</span> <span class="na">x</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">stepX</span><span class="p">:</span> <span class="mi">70</span> <span class="p">}</span>
<span class="p">});</span>

<span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">stars</span><span class="dl">"</span><span class="p">,</span> <span class="nx">stars</span><span class="p">);</span>

<span class="nx">stars</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">iterate</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">child</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">(</span><span class="nx">child</span> <span class="k">as</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Physics</span><span class="p">.</span><span class="nx">Arcade</span><span class="p">.</span><span class="nx">Image</span><span class="p">).</span><span class="nx">setBounceY</span><span class="p">(</span><span class="nx">Phaser</span><span class="p">.</span><span class="nb">Math</span><span class="p">.</span><span class="nx">FloatBetween</span><span class="p">(</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">));</span>
<span class="p">});</span>
</code></pre></div></div>

<p>static 그룹 객체를 만들고 12개의 별 객체를 만듭니다. 그룹 객체를 만들때 처음 1개는 자동으로 생성되므로 11번 반복하여 12개의 별 객체가 생성됩니다. x축 좌표는 12픽셀부터 시작하여 70픽셀 간격으로 생성됩니다. iterate 메소드를 통해 순차적으로 Y축 바운스를 설정해줍니다.</p>

<p>static 객체인 지형과 별 그룹 객체가 상호작용 하도록 다음 코드를 create 메소드에 추가합니다.</p>

<div data-lang="TYPESCRIPT" class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">this</span><span class="p">.</span><span class="nx">physics</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">collider</span><span class="p">(</span><span class="nx">stars</span><span class="p">,</span> <span class="nx">platforms</span><span class="p">);</span>
</code></pre></div></div>

<p>캐릭터가 별을 수집하면 별 객체가 사라지도록 설정해줍시다. 이것은 arcade 물리 객체의 overlap 메소드를 통해 가능합니다. 다음 코드를 create 메소드에 추가해 주세요.</p>

<div data-lang="TYPESCRIPT" class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">this</span><span class="p">.</span><span class="nx">physics</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">overlap</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span> <span class="nx">stars</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">collectStar</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
</code></pre></div></div>

<p>player 객체가 stars 객체와 overlap 되면 collectStar 메소드를 호출합니다. 해당 메소드를 작성해주세요.</p>

<div data-lang="TYPESCRIPT" class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">collectStar</span> <span class="p">(</span><span class="nx">_player</span><span class="p">:</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Types</span><span class="p">.</span><span class="nx">Physics</span><span class="p">.</span><span class="nx">Arcade</span><span class="p">.</span><span class="nx">GameObjectWithBody</span><span class="p">,</span> <span class="nx">star</span><span class="p">:</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Types</span><span class="p">.</span><span class="nx">Physics</span><span class="p">.</span><span class="nx">Arcade</span><span class="p">.</span><span class="nx">GameObjectWithBody</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
    <span class="p">(</span><span class="nx">star</span> <span class="k">as</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Physics</span><span class="p">.</span><span class="nx">Arcade</span><span class="p">.</span><span class="nx">Image</span><span class="p">).</span><span class="nx">disableBody</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>star 객체의 disableBody 함수를 호출하면 해당 객체가 사라집니다.</p>

<p><img src="/assets/images/phaser3/phaser3-img-05.png" alt="pahser-05" title="star 객체" /></p>

<h1 id="점수-설정">점수 설정</h1>

<p>별을 모으면 점수가 증가 하도록 하겠습니다. 우선 create 메소드에 점수 데이터와 텍스트 asset을 추가해주세요.</p>

<div data-lang="TYPESCRIPT" class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">score</span><span class="dl">"</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="k">this</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="dl">'</span><span class="s1">score: 0</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">fontSize</span><span class="p">:</span> <span class="dl">'</span><span class="s1">32px</span><span class="dl">'</span><span class="p">,</span> <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#000</span><span class="dl">'</span> <span class="p">}).</span><span class="nx">setName</span><span class="p">(</span><span class="dl">"</span><span class="s2">scoreText</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<p>다음으로 위에서 생성한 collectStar 메소드에 다음 코드를 추가합니다.</p>

<div data-lang="TYPESCRIPT" class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">score</span><span class="dl">"</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">score</span><span class="dl">"</span><span class="p">)</span> <span class="k">as</span> <span class="kr">number</span> <span class="o">+</span> <span class="mi">10</span><span class="p">);</span>
<span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">getByName</span><span class="p">(</span><span class="dl">"</span><span class="s2">scoreText</span><span class="dl">"</span><span class="p">)</span> <span class="k">as</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">GameObjects</span><span class="p">.</span><span class="nx">Text</span><span class="p">).</span><span class="nx">setText</span><span class="p">(</span><span class="dl">'</span><span class="s1">Score: </span><span class="dl">'</span> <span class="o">+</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">score</span><span class="dl">"</span><span class="p">)</span> <span class="k">as</span> <span class="kr">number</span><span class="p">));</span>
</code></pre></div></div>

<p><img src="/assets/images/phaser3/phaser3-img-06.png" alt="pahser-06" title="text Asset" /></p>

<h1 id="장애물-설정">장애물 설정</h1>

<p>마지막으로 장애물을 설정해 보겠습니다. 별을 모두 수집하면 폭탄이 하나 나오고 새로운 별 그룹 객체가 생성됩니다. create 메소드에 다음 코드를 추가합니다.</p>

<div data-lang="TYPESCRIPT" class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">bombs</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">physics</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">group</span><span class="p">();</span>

<span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">bombs</span><span class="dl">"</span><span class="p">,</span> <span class="nx">bombs</span><span class="p">);</span>
<span class="k">this</span><span class="p">.</span><span class="nx">physics</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">collider</span><span class="p">(</span><span class="nx">bombs</span><span class="p">,</span> <span class="nx">platforms</span><span class="p">);</span>
<span class="k">this</span><span class="p">.</span><span class="nx">physics</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">collider</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span> <span class="nx">bombs</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">hitBomb</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
</code></pre></div></div>

<p>폭탄의 그룹인 dynamic 그룹 객체를 생성하여 collider 객체로 충돌을 설정합니다. 또한 플레이어가 폭탄에 닿으면 hitBomb 메소드를 호출합니다.</p>

<p>hitBomb 메소드는 다음과 같이 작성합니다.</p>

<div data-lang="TYPESCRIPT" class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">hitBomb</span> <span class="p">(</span><span class="nx">player</span><span class="p">:</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Types</span><span class="p">.</span><span class="nx">Physics</span><span class="p">.</span><span class="nx">Arcade</span><span class="p">.</span><span class="nx">GameObjectWithBody</span><span class="p">,</span> <span class="nx">_bomb</span><span class="p">:</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Types</span><span class="p">.</span><span class="nx">Physics</span><span class="p">.</span><span class="nx">Arcade</span><span class="p">.</span><span class="nx">GameObjectWithBody</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">physics</span><span class="p">.</span><span class="nx">pause</span><span class="p">();</span>
    <span class="p">(</span><span class="nx">player</span> <span class="k">as</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Types</span><span class="p">.</span><span class="nx">Physics</span><span class="p">.</span><span class="nx">Arcade</span><span class="p">.</span><span class="nx">SpriteWithDynamicBody</span><span class="p">).</span><span class="nx">setTint</span><span class="p">(</span><span class="mh">0xff0000</span><span class="p">);</span>
    <span class="p">(</span><span class="nx">player</span> <span class="k">as</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Types</span><span class="p">.</span><span class="nx">Physics</span><span class="p">.</span><span class="nx">Arcade</span><span class="p">.</span><span class="nx">SpriteWithDynamicBody</span><span class="p">).</span><span class="nx">anims</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="dl">'</span><span class="s1">turn</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>폭탄에 닿으면 물리 객체의 상호작용이 정지되고 플레이어 캐릭터의 색이 빨같게 됩니다.</p>

<p>마지막으로 collectStar 메소드에 다음 코드를 추가합니다.</p>

<div data-lang="TYPESCRIPT" class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">stars</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">stars</span><span class="dl">"</span><span class="p">)</span> <span class="k">as</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Physics</span><span class="p">.</span><span class="nx">Arcade</span><span class="p">.</span><span class="nx">Group</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">stars</span><span class="p">.</span><span class="nx">countActive</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">stars</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">iterate</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">child</span><span class="p">)</span> <span class="p">{</span>
        <span class="p">(</span><span class="nx">child</span> <span class="k">as</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Physics</span><span class="p">.</span><span class="nx">Arcade</span><span class="p">.</span><span class="nx">Image</span><span class="p">).</span><span class="nx">enableBody</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="p">(</span><span class="nx">child</span> <span class="k">as</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Physics</span><span class="p">.</span><span class="nx">Arcade</span><span class="p">.</span><span class="nx">Image</span><span class="p">).</span><span class="nx">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="kd">const</span> <span class="nx">x</span> <span class="o">=</span> <span class="p">((</span><span class="nx">player</span> <span class="k">as</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Types</span><span class="p">.</span><span class="nx">Physics</span><span class="p">.</span><span class="nx">Arcade</span><span class="p">.</span><span class="nx">SpriteWithDynamicBody</span><span class="p">).</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="mi">400</span><span class="p">)</span> <span class="p">?</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nb">Math</span><span class="p">.</span><span class="nx">Between</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">800</span><span class="p">)</span> <span class="p">:</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nb">Math</span><span class="p">.</span><span class="nx">Between</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">400</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">bombs</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">bombs</span><span class="dl">"</span><span class="p">)</span> <span class="k">as</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Physics</span><span class="p">.</span><span class="nx">Arcade</span><span class="p">.</span><span class="nx">Group</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">bomb</span> <span class="o">=</span> <span class="nx">bombs</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="dl">'</span><span class="s1">bomb</span><span class="dl">'</span><span class="p">);</span>

    <span class="nx">bomb</span><span class="p">.</span><span class="nx">setBounce</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="nx">bomb</span><span class="p">.</span><span class="nx">setCollideWorldBounds</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    <span class="nx">bomb</span><span class="p">.</span><span class="nx">setVelocity</span><span class="p">(</span><span class="nx">Phaser</span><span class="p">.</span><span class="nb">Math</span><span class="p">.</span><span class="nx">Between</span><span class="p">(</span><span class="o">-</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">),</span> <span class="mi">20</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>별 객체가 하나도 없다면 새로운 별 객체 그룹을 생성하고 폭탄을 하나 생성하도록 합니다. 폭탄에 각각 바운스와 월드 바운스, 속도를 설정합니다.</p>

<p><img src="/assets/images/phaser3/phaser3-img-07.png" alt="pahser-07" title="폭탄 Asset" /></p>

                </div>
            </section>

            <!-- Email subscribe form at the bottom of the page -->
            <!-- 
                <section class="subscribe-form">
                    <h3 class="subscribe-form-title">Subscribe to Rubisco's Programming Note</h3>
                    <p>Get the latest posts delivered right to your inbox</p>
                    <span id="searchform" method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"  />
    <input class="location" type="hidden" name="location"  />
    <input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" onkeyup="myFunc()" 
               id="searchtext" type="text" name="searchtext"  
               placeholder="Search..." />
    </div>
    <script type="text/javascript">
        function myFunc() {
            if(event.keyCode == 13) {
                var url = encodeURIComponent($("#searchtext").val());
                location.href = "/search.html?query=" + url;
            }
        }
    </script>
</span>
                </section>
             -->

            <footer class="post-full-footer">
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                    
                
                <!-- /author  -->
            </footer>

            <!-- utterances -->
            <div id="comment">
                <script src="https://utteranc.es/client.js"
                repo="huimang2/huimang2.github.io"
                issue-term="pathname"
                theme="github-light"
                crossorigin="anonymous"
                async></script>
            </div>
        </article>

    </div>
</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
                
                
                
                
                    <article class="read-next-card"
                        
                            style="background-image: url(/assets/images/M31_starspike.jpg)"
                        
                    >
                        <header class="read-next-card-header">
                            <small class="read-next-card-header-sitetitle">&mdash; Rubisco's Programming Note &mdash;</small>
                            
                                <h3 class="read-next-card-header-title"><a href="/tag/typescript/">Typescript</a></h3>
                            
                        </header>
                        <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                        <div class="read-next-card-content">
                            <ul>
                                
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/typescript/interface">클래스와 인터페이스</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/typescript/syntax">타입스크립트 문법(TypeScript Syntax)</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/typescript/typescript">타입스크립트(TypeScript)란?</a></li>
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                            </ul>
                        </div>
                        <footer class="read-next-card-footer">
                            <a href="/tag/typescript/">
                                
                                    See all 3 posts  →
                                
                            </a>
                        </footer>
                    </article>
                
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/algorithm/gcd_lcm">
                <div class="post-card-image" style="background-image: url(/assets/images/algorithm-cover.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/algorithm/gcd_lcm">
                <header class="post-card-header">
                    
                        <div class="post-card-tags-container">
                            
                        </div>
                    

                    <h2 class="post-card-title">최대공약수와 최소공배수</h2>
                </header>
                <!-- <section class="post-card-excerpt">
                    
                        <p>최대공약수와 최소공배수

</p>
                    
                </section> -->
            </a>
            <footer class="post-card-meta">
                
                    
                
                <span class="reading-time">
                    
                    
                      3 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/typescript/interface">
                <div class="post-card-image" style="background-image: url(/assets/images/typescript-logo.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/typescript/interface">
                <header class="post-card-header">
                    
                        <div class="post-card-tags-container">
                            
                        </div>
                    

                    <h2 class="post-card-title">클래스와 인터페이스</h2>
                </header>
                <!-- <section class="post-card-excerpt">
                    
                        <p>클래스(class)

</p>
                    
                </section> -->
            </a>
            <footer class="post-card-meta">
                
                    
                
                <span class="reading-time">
                    
                    
                      5 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
        <a href="https://huimang2.github.io/">
            
            <span>Rubisco's Programming Note</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">게임 프레임워크 : Phaser3</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=%EA%B2%8C%EC%9E%84+%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC+%3A+Phaser3&amp;url=etc/phaser3"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>

        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=etc/phaser3"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>

        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>



        <!-- Previous/next page links - displayed on every page -->
        

        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="https://huimang2.github.io/">Rubisco's Programming Note</a> &copy; 2022</section>
                <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> &
                    <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a> using
                    <a href="https://github.com/jekyllt/jasper2" target="_blank" rel="noopener">Jasper2</a></section>
                <nav class="site-footer-nav">
                    <a href="/">Latest Posts</a>
                    
                    
                    <a href="https://ghost.org" target="_blank" rel="noopener">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>

    <!-- The big email subscribe modal content -->
    
    <div id="subscribe" class="subscribe-overlay">
        <a class="subscribe-overlay-close" href="#"></a>
        <div class="subscribe-overlay-content">
            
            <h1 class="subscribe-overlay-title">Search Rubisco's Programming Note</h1>
            <p class="subscribe-overlay-description">
            lunr.js를 이용한 posts 검색 </p>
            <span id="searchform" method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"  />
    <input class="location" type="hidden" name="location"  />
    <input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" onkeyup="myFunc()" 
               id="searchtext" type="text" name="searchtext"  
               placeholder="Search..." />
    </div>
    <script type="text/javascript">
        function myFunc() {
            if(event.keyCode == 13) {
                var url = encodeURIComponent($("#searchtext").val());
                location.href = "/search.html?query=" + url;
            }
        }
    </script>
</span>
        </div>
    </div>


    <!-- highlight.js -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.10.0/components/prism-abap.min.js"></script>
    <script>$(document).ready(function() {
      $('pre code').each(function(i, block) {
        hljs.highlightBlock(block);
      });
    });</script> -->

    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://demo.ghost.io/assets/js/jquery.fitvids.js?v=724281a32e"></script>


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', '', 'auto');
  ga('send', 'pageview');

 </script>


    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
        <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    /* toc ---------------------------------------------------------------------*/

    var tocTitle = document.getElementsByClassName("post-full-title")[0];
    var tocTitleY = window.pageYOffset + title.getBoundingClientRect().top;
    
    var tocArticle = document.getElementsByClassName("post-full-content")[0];
    var tocArticleY = window.pageYOffset + tocArticle.getBoundingClientRect().top;
  
    var toc = document.getElementById("toc");
    var tocHeaderNodes = getHeaderNodes(tocArticle);
    var tocNodes = getTOCNodes(toc);
  
    var tocBefore = undefined;

    function getTOCNodes(master) {
        var nodes = Array.prototype.slice.call(master.getElementsByTagName("*"), 0);
        var tocNodes = nodes.filter(function(elem) {
            return elem.tagName == "A";
        });
        return tocNodes;
    }
    
    function getHeaderNodes(master) {
        var nodes = Array.prototype.slice.call(master.getElementsByTagName("*"), 0);
        var headerNodes = nodes.filter(function(elem) {
            return elem.tagName == "H1" || elem.tagName == "H2" || elem.tagName == "H3" && !elem.classList.contains('no-toc');
        });
        return headerNodes;
    }

    tocNodes.forEach(el => {
        el.addEventListener('click', function(e){
            e.preventDefault();
            let id = this.getAttribute('href').slice(1);
            window.scrollTo(window.scrollX, window.scrollY + document.getElementById(id).getBoundingClientRect().top - 80);
        });
    });

    document.querySelector('.post-full-content').querySelectorAll('p a[href^="#"]').forEach(el => {
        el.addEventListener('click', function(e){
            e.preventDefault();
            let id = this.getAttribute('href').slice(1);
            window.scrollTo(window.scrollX, window.scrollY + document.getElementById(id).getBoundingClientRect().top - 80);
        });
    });

    /*--------------------------------------------------------------------------*/

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 30;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
            toc.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
            toc.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;

        // toc
        var tocCurrent = tocHeaderNodes.filter(function(header) {
            var headerY = window.pageYOffset + header.getBoundingClientRect().top;
            return window.scrollY >= headerY - 90;
        });
  
        if (tocCurrent.length > 0) {
            tocCurrent = tocCurrent[tocCurrent.length-1];
  
            var tocCurrentA = tocNodes.filter(function(tocNode) {
                return tocNode.getElementsByTagName("span")[0].innerHTML == tocCurrent.innerHTML;
            })
            
            tocCurrentA = tocCurrentA[0];

            if (tocCurrentA) {
                if (tocBefore == undefined) tocBefore = tocCurrentA;
    
                if (tocBefore != tocCurrentA) {
                    tocBefore.classList.remove("toc-active");
                    tocBefore = tocCurrentA;
                }
    
                tocCurrentA.classList.add("toc-active");
            }
            else {
                if (tocBefore) 
                    tocBefore.classList.remove("toc-active");
            }
        }
        else {
            if (tocBefore) 
                tocBefore.classList.remove("toc-active");
        }
        
        if(toc && tocArticle.getBoundingClientRect().bottom <= 0) {
            toc.classList.add('toc-hidden');
        } else {
            toc.classList.remove('toc-hidden');
        }
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>

    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->

</body>
</html>
